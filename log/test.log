Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 500 Internal Server Error in 0.5ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:26:44 -0700
Processing by PurchasesController#index as HTML
Completed 500 Internal Server Error in 1.0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:27:15 -0700
Processing by PurchasesController#index as HTML
Completed 500 Internal Server Error in 0.7ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:28:00 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.0ms (Views: 7.4ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (36.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 4.3ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.6ms (ActiveRecord: 0.4ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.7ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:28:00 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:12 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:12 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.7ms (Views: 4.7ms | ActiveRecord: 0.1ms)
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.7ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 3.0ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.7ms (ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.7ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:29:13 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:29:13 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.4ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb4ec49d498 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36158-1g8rby6>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa5b3587ea0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36238-u6l13e>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd784f85be8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36289-29dkj2>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f99e5c53e20 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36487-1f7a7xk>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff0f15f08b8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36533-1jofi7>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (2.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbe9d8b0250 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36553-glm3p7>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faa8ba76d58 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36651-1s6r2tz>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe0f54bf540 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36665-1ibs72a>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa73ef8f0b0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36687-z4hdkc>>}}
Completed 500 Internal Server Error in 2.6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd25ec2dae8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36711-rav4uy>>}}
Completed 500 Internal Server Error in 1.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f830dfa4938 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36794-11h09h5>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f89137af190 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36813-1ae82nn>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ffa4d7951e0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36837-1el2tit>>}}
Completed 500 Internal Server Error in 2.3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd7548d8eb0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36856-1qzq960>>}}
Completed 500 Internal Server Error in 2.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.4ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f947103ad38 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36919-1y9hpd>>}}
Completed 500 Internal Server Error in 3.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe85dab04d0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36938-1li2yhk>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f949bfb8768 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-36986-1im1bkl>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe1d63ca310 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37011-1dc12je>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.4ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd504fcfc70 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37034-10bp7o4>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fde46fc2b88 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37048-qufogy>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff162a88d50 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37067-1dodcmr>>}}
Completed 500 Internal Server Error in 0.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fef06793dd8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37105-1l6lwow>>}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f7ffd18b6c0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37125-wn2rjf>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.2ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd713fbb0e8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37144-5j39y0>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:43:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:43:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 11.1ms (ActiveRecord: 3.7ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fabf80353f8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37186-14k4bad>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:43:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:43:54 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 10.5ms (ActiveRecord: 3.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff332f0e358 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37235-za30i6>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:45:09 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:09 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.6ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa4eaba3c68 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37258-vht1w8>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:45:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.1ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (34.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.8ms (Views: 4.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe0e66d9f38 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37290-2atpve>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.2ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.3ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.4ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.9ms (ActiveRecord: 1.0ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:45:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:45:27 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd44fdfec08 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37335-muixfs>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:46:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:46:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.4ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8e2911ab70 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37406-7eq388>>}}
Completed 500 Internal Server Error in 1.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007feab0487ce8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37478-1ugp63t>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:49:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:49:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 11.8ms (ActiveRecord: 4.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (2.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (18.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.2ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fc05efd2ac0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37492-1wftwuz>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:49:44 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:49:44 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.5ms (ActiveRecord: 2.7ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb6c1903e70 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37568-7c1flg>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fab9f79fde0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37586-1ahwn3b>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:51:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:51:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.9ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8dbce87668 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37676-19lmyoq>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fca274906f8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37695-1dnuh16>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff97a7b6ad0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37714-1p7zicj>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f91f2093928 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37735-2s0n60>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:53:16 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:53:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.6ms (ActiveRecord: 2.9ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fcf063b03f8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37774-1qaoiyu>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:53:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:53:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.6ms (ActiveRecord: 2.7ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa4957ceb60 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37820-rcfm8d>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:54:25 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 10.9ms (ActiveRecord: 3.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f88de1013f0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37834-thkfaq>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:54:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.0ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:54:32 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 40.9ms (Views: 38.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.5ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.8ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.8ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f84bc7f1f78 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37850-mt1sub>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:32 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 3.2ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ffc036f01b0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37875-1p7u70m>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:54:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:54:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.9ms (ActiveRecord: 3.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (2.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (16.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fdd658386d8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37896-ksi27>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:55:08 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:55:08 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.0ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8a4f008ff8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37935-qts5lk>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:55:22 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:55:22 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.3ms (ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fafe9f1aab8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37956-1esjmhq>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:55:43 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:55:43 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.8ms (ActiveRecord: 2.7ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb7fafc5440 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-37976-1u7a33v>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:56:01 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:56:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.7ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa546fcf330 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38019-1vmgkkh>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb609068170 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38039-ygbwac>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa6eda80db8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38059-ptobfn>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:56:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:56:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.9ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fef7b7ce6e8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38074-rc1qlt>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:57:01 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:57:01 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.7ms (ActiveRecord: 2.7ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff1963e0730 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38094-i8t4c4>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:57:15 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:57:15 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.1ms (ActiveRecord: 2.9ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9361bda3e8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38154-1q7dsqw>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:58:13 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:13 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.9ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 10:58:18 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.0ms (Views: 7.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.8ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbd3ed805d8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38189-17du259>>}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.5ms (ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.1ms (ActiveRecord: 0.2ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (1.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 3.7ms (Views: 0.9ms | ActiveRecord: 0.3ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:58:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.2ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa9a0af1580 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38211-keldo4>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9d4eafa7b0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38236-jyryft>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 17:59:16 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 17:59:16 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.0ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faf6817a1c8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38319-w6m8j7>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 18:00:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:00:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.0ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff93f14b848 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38367-kp2ucr>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 18:00:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:00:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 8.9ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb05af6a358 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38414-1effm46>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 18:01:56 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:01:56 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.2ms (ActiveRecord: 2.8ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbbd7053378 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38433-1l2xie6>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:02:54 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.3ms (Views: 7.1ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 3.4ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.8ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fddaf0f8108 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38626-27yxpd>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.0ms (ActiveRecord: 0.9ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:02:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fae5f8c2430 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38672-1bn8n4x>>}}
Completed 500 Internal Server Error in 133190.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (5.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f837f0c0238 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38866-akmzyu>>}}
Completed 500 Internal Server Error in 4317.5ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8085bc0b80 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38907-13a2c0i>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fa7ce3a81a8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-38922-5jumvr>>}}
Completed 500 Internal Server Error in 4.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fac0083c1c0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39003-1nx9h1r>>}}
Completed 500 Internal Server Error in 4.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb00efc8c60 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39074-1504r1u>>}}
Completed 500 Internal Server Error in 42861.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faba2690190 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39122-133mwen>>}}
Completed 500 Internal Server Error in 124085.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff9578c2410 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39185-1xl32q2>>}}
Completed 500 Internal Server Error in 2774.6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd7d07d90b0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39204-1k0ls55>>}}
Completed 500 Internal Server Error in 4.3ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe3bf5b9960 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39238-t2lf98>>}}
Completed 500 Internal Server Error in 4.0ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faed6832408 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39268-hf6c25>>}}
Completed 500 Internal Server Error in 4.0ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fed898a1d98 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39317-16xzbcb>>}}
Completed 500 Internal Server Error in 4.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9f7f681480 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39349-1vxugal>>}}
Completed 500 Internal Server Error in 4.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe333da8c20 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39396-1vu6lf1>>}}
Completed 500 Internal Server Error in 4.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
  Rendered purchases/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.2ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.0ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.8ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 5.7ms (ActiveRecord: 2.9ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fb3d9097038 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39411-9dkjc7>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.2ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.2ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.8ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.1ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:13:28 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:13:28 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 3.9ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fcf458c2870 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39430-17zdova>>}}
Completed 500 Internal Server Error in 4.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:14:02 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (2.1ms)
Completed 200 OK in 15.5ms (Views: 13.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 7.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 3.9ms (Views: 1.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.7ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8b4a002620 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39446-19a0o8z>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.8ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.9ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.8ms (Views: 0.8ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:02 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fea87248fa0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39463-17cntfb>>}}
Completed 500 Internal Server Error in 4.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd753398190 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39510-1nlysfq>>}}
Completed 500 Internal Server Error in 4.1ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.8ms (Views: 4.7ms | ActiveRecord: 0.1ms)
  [1m[35m (6.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 3.6ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.1ms (ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.4ms (Views: 1.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.6ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:14:31 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.4ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ffdb7881a78 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39526-1lkvht7>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:14:31 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.7ms (Views: 3.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faa3df15038 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39572-dh259>>}}
Completed 500 Internal Server Error in 4.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (5.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.9ms (Views: 4.8ms | ActiveRecord: 0.1ms)
  [1m[35m (6.7ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.9ms (Views: 1.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd2e80c1490 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39587-1gd0l90>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.3ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.4ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.6ms (ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:15:27 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:15:27 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff008850bb0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39636-15vnm7b>>}}
Completed 500 Internal Server Error in 4.4ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:16:57 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.4ms (Views: 7.1ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.6ms (ActiveRecord: 0.9ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.5ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.9ms (Views: 1.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.5ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.5ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ff290821380 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39651-3dshoa>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:16:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8038210bc8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39700-10pd5b4>>}}
Completed 500 Internal Server Error in 4.2ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:17:54 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.3ms)
Completed 200 OK in 9.2ms (Views: 7.1ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.3ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9064d44b70 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39715-aizgnf>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.9ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:17:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f88661228c0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39736-tmori2>>}}
Completed 500 Internal Server Error in 4.0ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (6.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f81a187a0f8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39755-qyghia>>}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:18:17 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.5ms (Views: 7.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 4.4ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 5.7ms (ActiveRecord: 2.8ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.7ms (ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd6391b1978 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39774-shql2d>>}}
Completed 500 Internal Server Error in 0.6ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.0ms (ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.6ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:18:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbf5b023c68 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39818-gn5th4>>}}
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.5ms (Views: 5.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbc85cf68d8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39835-164i0j7>>}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.2ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.5ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.1ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.6ms (ActiveRecord: 0.8ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.1ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:19:17 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 4.6ms (Views: 3.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:19:29 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.7ms (Views: 7.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.7ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 3.2ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.5ms (ActiveRecord: 0.1ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.5ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.8ms (ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.7ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.5ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:29 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fc608060e20 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39880-zbxbw3>>}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:19:42 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.2ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.1ms (ActiveRecord: 2.9ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.5ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fc7df2990d8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39898-5km41t>>}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.8ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 3.2ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.5ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.2ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.2ms (ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:19:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:20:10 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 10.0ms (Views: 7.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 4.5ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.8ms (ActiveRecord: 1.1ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.0ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faf474d2aa8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39913-yqxvt>>}}
Completed 500 Internal Server Error in 0.2ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.0ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:10 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:20:24 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.2ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 9.2ms (ActiveRecord: 3.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fdeac436628 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-39948-19vbh2c>>}}
Completed 500 Internal Server Error in 0.2ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.6ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.0ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.3ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.2ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:20:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.4ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:22:58 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.4ms (Views: 7.2ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.2ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.6ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 2.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.4ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.7ms (ActiveRecord: 0.5ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007ffe9b85bc30 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40065-1l8lf2j>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.8ms (ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.5ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.6ms (Views: 0.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:22:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (7.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:23:45 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.4ms (Views: 7.6ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.9ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.2ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 3.9ms (Views: 1.6ms | ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.7ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.2ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.8ms (ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.8ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 2.0ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fca7c6407a0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40101-18fsii8>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.0ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:23:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.0ms (Views: 4.9ms | ActiveRecord: 0.1ms)
  [1m[35m (6.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.5ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.4ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fec4181ce48 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40416-r7oqzy>>}}
Completed 500 Internal Server Error in 1.2ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.8ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.5ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:17 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.7ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:18 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:31:18 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 4.3ms (ActiveRecord: 1.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (6.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 6.1ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.7ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.4ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.6ms (Views: 1.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.9ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.5ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faadc2c42a8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40432-qlfjv4>>}}
Completed 500 Internal Server Error in 1.2ms
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.4ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.4ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:31:48 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:31:48 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 4.4ms (Views: 3.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:32:42 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 9.1ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.6ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 2.0ms (Views: 1.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.3ms (ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f970dfe6518 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40469-1vpyyuk>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.6ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.9ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.9ms (ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:32:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:34:03 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.2ms (Views: 7.5ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.6ms (ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.6ms (Views: 1.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe5bdbfd0b0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40509-ztkj39>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.6ms (ActiveRecord: 1.2ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:03 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.8ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 2.1ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f83d8006050 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40546-15wd1td>>}}
Completed 500 Internal Server Error in 1.0ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.3ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.7ms (ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.0ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.6ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:34:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:34:38 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 3.7ms (Views: 3.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.8ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.6ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.5ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.6ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.6ms (ActiveRecord: 1.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.7ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe0fdf36fe8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40645-f3zgsa>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to 
Completed 500 Internal Server Error in 7.9ms
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:37:30 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.2ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:37:30 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 3.6ms (Views: 2.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:42:35 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (1.5ms)
Completed 200 OK in 9.5ms (Views: 7.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.6ms (ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:35 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.7ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fed1fa70b98 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40821-ky1wyx>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.3ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.4ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.3ms (ActiveRecord: 1.6ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (2.1ms)[0m  rollback transaction
  [1m[36m (31.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.2ms (ActiveRecord: 0.6ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:36 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.4ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
  Rendered purchases/new.html.erb within layouts/application (0.2ms)
Completed 200 OK in 9.2ms (Views: 4.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 5.2ms (ActiveRecord: 1.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.6ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 34.1ms (Views: 32.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.7ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fcbfad9dd70 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40838-1amslta>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Redirected to http://test.host/purchases
Completed 302 Found in 0.9ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Redirected to http://test.host/purchases
Completed 302 Found in 0.8ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.7ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:42:52 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.1ms (Views: 1.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:42:52 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.3ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 10.0ms (ActiveRecord: 3.0ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fdf1e89a968 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-40951-11mtinb>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 0], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 0], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 5.9ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:37 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.9ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.1ms)
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.9ms (Views: 0.5ms | ActiveRecord: 0.1ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.7ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.4ms (ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:45:38 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:45:38 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 4.3ms (Views: 3.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.4ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:46:57 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (1.7ms)
Completed 200 OK in 10.2ms (Views: 8.3ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.6ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 35.7ms (Views: 34.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.7ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
Completed 500 Internal Server Error in 0.4ms
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f8699ca7d90 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41000-d5obdv>>}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to 
Completed 500 Internal Server Error in 8.4ms
  [1m[35m (0.6ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 3.8ms (Views: 0.9ms | ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.4ms (Views: 0.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.1ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:46:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.2ms (ActiveRecord: 0.2ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.8ms (Views: 4.7ms | ActiveRecord: 0.1ms)
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 3.0ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.0ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.2ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.0ms (ActiveRecord: 0.4ms)
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fc63dd46678 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41066-15n1wxe>>}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to 
Completed 500 Internal Server Error in 9.7ms
  [1m[35m (4.0ms)[0m  rollback transaction
  [1m[36m (4.4ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Redirected to http://test.host/purchases
Completed 302 Found in 1.0ms (ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Redirected to http://test.host/purchases
Completed 302 Found in 0.9ms (ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.0ms (ActiveRecord: 0.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:48:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:48:45 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.6ms (Views: 2.9ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
  Rendered purchases/index.html.erb within layouts/application (0.2ms)
Completed 200 OK in 5.8ms (Views: 4.7ms | ActiveRecord: 0.1ms)
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.6ms (ActiveRecord: 1.0ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.4ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.6ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007faaf9070200 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41110-ur5w0j>>}}
Completed 500 Internal Server Error in 0.9ms
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:23 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 3.2ms (Views: 1.3ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.8ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 0.9ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:49:24 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:49:24 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 4.2ms (Views: 3.5ms | ActiveRecord: 0.1ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:50:42 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 10.0ms (Views: 7.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (7.3ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.5ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.5ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.9ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 3.0ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fabb4330ad8 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41221-3focc2>>}}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to 
Completed 500 Internal Server Error in 7.3ms
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.7ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.3ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:50:42 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 0.9ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd2a3cf0328 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41261-15hgxjk>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:51:49 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", nil], ["created_at", Sun, 06 Apr 2014 18:52:33 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:33 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", nil], ["created_at", Sun, 06 Apr 2014 18:52:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to 
Completed 500 Internal Server Error in 76087.3ms
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f94eadb3388 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41310-1hhh6f9>>}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (3.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:52:50 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to 
Completed 500 Internal Server Error in 19.9ms
  [1m[36m (6.7ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9f33d2fdf0 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41353-4aa77k>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.9ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:25 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 13.8ms (ActiveRecord: 4.9ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (1.1ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:57 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:57 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.0ms (Views: 5.2ms | ActiveRecord: 0.1ms)
  [1m[35m (6.0ms)[0m  rollback transaction
  [1m[36m (8.5ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.4ms (ActiveRecord: 0.4ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbc76e89510 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41377-ewt9si>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 4.3ms (ActiveRecord: 1.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.0ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 34.7ms (Views: 33.9ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.3ms (Views: 0.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.9ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:53:58 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:53:58 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered purchases/edit.html.erb within layouts/application (0.2ms)
Completed 200 OK in 7.3ms (Views: 5.1ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 3.1ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.4ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 1.9ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.4ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 2.5ms (Views: 1.4ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.6ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.8ms (ActiveRecord: 0.4ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.5ms (ActiveRecord: 0.3ms)
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" ORDER BY "purchases"."id" DESC LIMIT 1[0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fbbb557ab20 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41460-13uwokx>>}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 4.6ms (ActiveRecord: 1.4ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.5ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 0.9ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.9ms (ActiveRecord: 0.3ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:41 UTC +00:00]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.6ms (ActiveRecord: 0.4ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:55:41 -0700
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 3.6ms (Views: 3.0ms | ActiveRecord: 0.1ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:54 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:54 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  Rendered purchases/show.html.erb within layouts/application (0.2ms)
Completed 200 OK in 6.9ms (Views: 5.0ms | ActiveRecord: 0.1ms)
  [1m[35m (6.6ms)[0m  rollback transaction
  [1m[36m (1.0ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 2.7ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.2ms (ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.0ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.5ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.0ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.9ms (ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fd97dd14288 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41475-btiwiz>>}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 2], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 5], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 4], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 4.4ms (ActiveRecord: 1.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.6ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.0ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#index as HTML
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" [0m
Completed 200 OK in 2.2ms (Views: 1.2ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.2ms (Views: 0.7ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 2.0ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 18:55:55 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.2ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 11:55:55 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 4.0ms (Views: 3.2ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
Connecting to database specified by database.yml
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.1ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 4.2ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.3ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 5.8ms (Views: 5.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 1.3ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.8ms (Views: 1.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 2.3ms (Views: 1.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.3ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.4ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.9ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.3ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.7ms (ActiveRecord: 0.4ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.4ms (ActiveRecord: 0.3ms)
  [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 2.2ms (ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007fe80f2d9228 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41637-184qpzb>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:45 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 4.1ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.6ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 12:00:45 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 3.8ms (Views: 3.1ms | ActiveRecord: 0.1ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
Connecting to database specified by database.yml
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (7.2ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.2ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Started GET "/purchases" for 127.0.0.1 at 2014-04-06 12:00:59 -0700
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
  Rendered purchases/index.html.erb within layouts/application (1.4ms)
Completed 200 OK in 8.0ms (Views: 7.0ms | ActiveRecord: 0.1ms)
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#new as HTML
Completed 200 OK in 2.1ms (Views: 1.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.1ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.8ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mPurchase Load (0.1ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "purchases" WHERE "purchases"."id" = ?[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 5.1ms (ActiveRecord: 1.2ms)
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "purchases" WHERE "purchases"."id" = ?  [["id", 1]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.3ms (ActiveRecord: 0.2ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 1.0ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases/1
Completed 302 Found in 2.6ms (ActiveRecord: 0.1ms)
  [1m[35m (0.5ms)[0m  rollback transaction
  [1m[36m (0.9ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases/1
Completed 302 Found in 1.3ms (ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.9ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"1"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
Completed 200 OK in 1.6ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 200 OK in 2.8ms (Views: 0.8ms | ActiveRecord: 0.1ms)
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  [1m[35m (1.1ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by PurchasesController#update as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}, "id"=>"1"}
  [1m[36mPurchase Load (0.0ms)[0m  [1mSELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1[0m  [["id", "1"]]
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 200 OK in 2.2ms (Views: 0.7ms | ActiveRecord: 0.1ms)
  [1m[35m (0.4ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mPurchase Load (0.0ms)[0m  SELECT "purchases".* FROM "purchases" WHERE "purchases"."id" = ? LIMIT 1  [["id", "1"]]
Completed 200 OK in 1.7ms (Views: 0.9ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.8ms (ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 1.6ms (ActiveRecord: 0.3ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"1"}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/purchases
Completed 302 Found in 1.8ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.7ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "purchases" 
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"csv"=>#<Rack::Test::UploadedFile:0x007f9d4742ae00 @content_type="text/csv", @original_filename="example_input.tab", @tempfile=#<Tempfile:/var/folders/jy/0h33snlx6ds6j69tl764g67c7r20cg/T/example_input.tab20140406-41650-1ngueiv>>}}
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 2], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 5], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["count", 4], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[35m (0.0ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/purchases
Completed 302 Found in 3.7ms (ActiveRecord: 0.8ms)
  [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "purchases" [0m
  [1m[35m (0.3ms)[0m  rollback transaction
  [1m[36m (0.7ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.2ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
  [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
Processing by PurchasesController#create as HTML
  Parameters: {"purchase"=>{"count"=>"invalid value"}}
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.0ms)[0m  rollback transaction
  [1m[36m (0.8ms)[0m  [1mDELETE FROM "purchases";[0m
  [1m[35m (0.1ms)[0m  SELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';
  [1m[36m (0.1ms)[0m  [1mDELETE FROM sqlite_sequence where name = 'purchases';[0m
  [1m[35m (0.0ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "purchases" ("count", "created_at", "updated_at") VALUES (?, ?, ?)  [["count", 1], ["created_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00], ["updated_at", Sun, 06 Apr 2014 19:00:59 UTC +00:00]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by PurchasesController#index as HTML
  [1m[35mPurchase Load (0.1ms)[0m  SELECT "purchases".* FROM "purchases" 
Completed 200 OK in 1.1ms (Views: 0.6ms | ActiveRecord: 0.1ms)
  [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
  [1m[35m (0.8ms)[0m  DELETE FROM "purchases";
  [1m[36m (0.1ms)[0m  [1mSELECT name FROM sqlite_master WHERE type='table' AND name='sqlite_sequence';[0m
  [1m[35m (0.1ms)[0m  DELETE FROM sqlite_sequence where name = 'purchases';
